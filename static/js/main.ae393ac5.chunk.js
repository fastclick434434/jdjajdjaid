(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{124:function(e,t,n){e.exports=n.p+"static/media/nn.e3d7401a.jpg"},125:function(e,t,n){e.exports=n.p+"static/media/kazan.23099a08.jpg"},126:function(e,t,n){e.exports=n.p+"static/media/nov.4475a012.jpg"},127:function(e,t,n){e.exports=n.p+"static/media/peterburg.0b7346ca.jpg"},128:function(e,t,n){e.exports=n.p+"static/media/msk.f79645b8.gif"},165:function(e,t,n){e.exports=n(391)},391:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(67),c=n.n(o),l=n(17),i=n(2),u=(n(122),n(11)),s=n.n(u),d=n(19),p=n(69),f=(n(185),n(84),n(186),n(187),n(188),n(189),n(52),n(190),n(191),n(192),n(193),n(194),n(195),n(196),Object(l.b)(function(e){return{user:e.user.vk,transactions:e.transactions.list,topPlace:e.top.findIndex(function(t){return t.id===e.user.vk.id})+1,cloud:e.cloud}},function(e){var t=e.navigator.goForward,n=e.transactions,a=n.select,r=n.reset,o=e.user;return{go:t,transactionSelect:a,resetTransactions:r,loadUser:o.load,openProfile:o.openProfile,cloudUpdate:e.cloud.changeParam}})(function(e){var t=e.id,n=e.user,o=e.go,c=(e.transactions,e.cloud),l=(e.transactionSelect,e.resetTransactions),u=e.loadUser,f=(e.topPlace,e.openProfile,e.cloudUpdate),m=Object(a.useState)(!1),b=Object(p.a)(m,2),v=b[0],g=b[1],h=Object(a.useState)(!1),E=Object(p.a)(h,2),w=E[0],k=E[1],y=function(){var e=Object(d.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),l(),e.next=4,u();case 4:g(!1);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)(function(){k(!!c.loaded&&!c.discussion_tooltip)},[c.discussion_tooltip,c.loaded]),r.a.createElement(i.Panel,{id:t},r.a.createElement(i.PanelHeader,{left:r.a.createElement(i.Tooltip,{text:"\u0427\u0442\u043e\u0431\u044b \u043e\u0442\u043a\u0440\u044b\u0442\u044c \u0431\u0435\u0441\u0435\u0434\u0443, \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043a\u043d\u043e\u043f\u043a\u0443. ",isShown:w,onClose:function(){k(!1),f({param:"discussion_tooltip",value:!0})},offsetX:5,offsetY:5},r.a.createElement(i.HeaderButton,{onClick:function(){return function(e){var t=document.createElement("a");t.href=e,t.target="_blank",t.dispatchEvent(new window.MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))}("https://vk.me/join/AJQ1d/NhfhBeG2emVD3fKQsj")}}))},"\u0421\u0445\u0435\u043c\u0430 \u041c\u0435\u0442\u0440\u043e"),r.a.createElement(i.PullToRefresh,{onRefresh:y,isFetching:v},n&&r.a.createElement(i.Group,{title:""}),r.a.createElement(i.Group,null,r.a.createElement(i.Div,null,"\u041f\u0435\u0440\u0435\u0434 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0441\u0435\u0440\u0432\u0438\u0441\u0430, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434.",r.a.createElement("br",null),r.a.createElement("br",null),"\u0415\u0441\u043b\u0438 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0433\u043e\u0440\u043e\u0434, \u0412\u044b \u043d\u0435 \u0441\u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0441\u0435\u0440\u0432\u0438\u0441\u043e\u043c.")),r.a.createElement(i.Group,{title:"\u0420\u043e\u0441\u0441\u0438\u044f"},r.a.createElement(i.List,null,r.a.createElement(i.Cell,{expandable:!0,onClick:function(){return o("stories")}},"\u041c\u043e\u0441\u043a\u0432\u0430"),r.a.createElement(i.Cell,{expandable:!0,onClick:function(){return o("about")}},"\u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433"),r.a.createElement(i.Cell,{expandable:!0,onClick:function(){return o("transaction")}},"\u041a\u0430\u0437\u0430\u043d\u044c"),r.a.createElement(i.Cell,{expandable:!0,onClick:function(){return o("top")}},"\u041d\u043e\u0432\u043e\u0441\u0438\u0431\u0438\u0440\u0441\u043a"),r.a.createElement(i.Cell,{expandable:!0,onClick:function(){return o("profile")}},"\u041d\u0438\u0436\u043d\u0438\u0439 \u041d\u043e\u0432\u0433\u043e\u0440\u043e\u0434"))),r.a.createElement(i.Group,null,r.a.createElement(i.Div,null,r.a.createElement(i.Button,{component:"a",href:"https://vk.me/schemm",type:"transparent"},"\u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0438\u0442\u044c \u0433\u043e\u0440\u043e\u0434")))))})),m=n(34),b=n.n(m),v=(n(61),n(124),n(62),n(35)),g=Object(l.b)(function(e){return{top:e.top}},function(e){var t=e.navigator.goBack,n=e.navigator.goForward,a=e.transactions,r=a.select,o=a.reset,c=e.user;return{go:n,transactionSelect:r,resetTransactions:o,loadUser:c.load,openProfile:c.openProfile,back:t,cloudUpdate:e.cloud.changeParam}})(function(e){var t=e.id,a=e.back;e.top,e.openProfile,e.go;return r.a.createElement(i.Panel,{id:t},r.a.createElement(i.PanelHeader,{left:r.a.createElement(b.a,{onClick:a})},"\u041d\u0438\u0436\u043d\u0438\u0439 \u041d\u043e\u0432\u0433\u043e\u0440\u043e\u0434"),r.a.createElement(i.Group,{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"height: 100vw, weight: 110vw",textAlign:"center"}},r.a.createElement(i.Div,null,r.a.createElement("img",{src:n(124),alt:"",style:{width:"100%",boxShadow:"0 0 25px",borderRadius:35}}))),r.a.createElement("div",null,r.a.createElement(v.Notify,{type:"info"},r.a.createElement("strong",null,"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e"),r.a.createElement("br",null),r.a.createElement("br",null),"\u041e\u0442\u043a\u0440\u044b\u0442\u0438\u0435: 05:15",r.a.createElement("br",null),r.a.createElement("br",null),"\u0417\u0430\u043a\u0440\u044b\u0442\u0438\u0435: 00:15",r.a.createElement("br",null),r.a.createElement("br",null),"\u0426\u0435\u043d\u0430 \u0431\u0438\u043b\u0435\u0442\u0430: 28\u20bd")))}),h=(n(125),n(202),Object(l.b)(function(e){return{top:e.top}},function(e){var t=e.navigator.goBack,n=e.navigator.goForward,a=e.transactions,r=a.select,o=a.reset,c=e.user;return{go:n,transactionSelect:r,resetTransactions:o,loadUser:c.load,openProfile:c.openProfile,back:t,cloudUpdate:e.cloud.changeParam}})(function(e){var t=e.id,a=e.back;e.top,e.openProfile,e.go;return r.a.createElement(i.Panel,{id:t},r.a.createElement(i.PanelHeader,{left:r.a.createElement(b.a,{onClick:a})},"\u041a\u0430\u0437\u0430\u043d\u044c"),r.a.createElement(i.Group,{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"height: 100vw, weight: 110vw",textAlign:"center"}},r.a.createElement(i.Div,null,r.a.createElement("img",{src:n(125),alt:"",style:{width:"100%",boxShadow:"0 0 25px",borderRadius:35}}))),r.a.createElement("div",null,r.a.createElement(v.Notify,{type:"info"},r.a.createElement("strong",null,"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e"),r.a.createElement("br",null),r.a.createElement("br",null),"\u041e\u0442\u043a\u0440\u044b\u0442\u0438\u0435: 06:00",r.a.createElement("br",null),r.a.createElement("br",null),"\u0417\u0430\u043a\u0440\u044b\u0442\u0438\u0435: 00:00",r.a.createElement("br",null),r.a.createElement("br",null),"\u0426\u0435\u043d\u0430 \u0431\u0438\u043b\u0435\u0442\u0430: 25\u20bd")))})),E=(n(126),Object(l.b)(function(e){return{top:e.top}},function(e){var t=e.navigator.goBack,n=e.navigator.goForward,a=e.transactions,r=a.select,o=a.reset,c=e.user;return{go:n,transactionSelect:r,resetTransactions:o,loadUser:c.load,openProfile:c.openProfile,back:t,cloudUpdate:e.cloud.changeParam}})(function(e){var t=e.id,a=e.back;e.top,e.openProfile,e.go;return r.a.createElement(i.Panel,{id:t},r.a.createElement(i.PanelHeader,{left:r.a.createElement(b.a,{onClick:a})},"\u041d\u043e\u0432\u043e\u0441\u0438\u0431\u0438\u0440\u0441\u043a"),r.a.createElement(i.Group,{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"height: 100vw, weight: 110vw",textAlign:"center"}},r.a.createElement(i.Div,null,r.a.createElement("img",{src:n(126),alt:"",style:{width:"100%",boxShadow:"0 0 25px",borderRadius:35}}))),r.a.createElement("div",null,r.a.createElement(v.Notify,{type:"info"},r.a.createElement("strong",null,"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e"),r.a.createElement("br",null),r.a.createElement("br",null),"\u041e\u0442\u043a\u0440\u044b\u0442\u0438\u0435: 05:45",r.a.createElement("br",null),r.a.createElement("br",null),"\u0417\u0430\u043a\u0440\u044b\u0442\u0438\u0435: 00:00",r.a.createElement("br",null),r.a.createElement("br",null),"\u0426\u0435\u043d\u0430 \u0431\u0438\u043b\u0435\u0442\u0430: 22\u20bd")))})),w=(n(127),Object(l.b)(function(e){return{top:e.top}},function(e){var t=e.navigator.goBack,n=e.navigator.goForward,a=e.transactions,r=a.select,o=a.reset,c=e.user;return{go:n,transactionSelect:r,resetTransactions:o,loadUser:c.load,openProfile:c.openProfile,back:t,cloudUpdate:e.cloud.changeParam}})(function(e){var t=e.id,a=e.back;e.top,e.openProfile,e.go;return r.a.createElement(i.Panel,{id:t},r.a.createElement(i.PanelHeader,{left:r.a.createElement(b.a,{onClick:a})},"\u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433"),r.a.createElement(i.Group,{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"height: 100vw, weight: 110vw",textAlign:"center"}},r.a.createElement(i.Div,null,r.a.createElement("img",{src:n(127),alt:"",style:{width:"100%",boxShadow:"0 0 25px",borderRadius:35}}))),r.a.createElement("div",null,r.a.createElement(v.Notify,{type:"info"},r.a.createElement("strong",null,"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e"),r.a.createElement("br",null),r.a.createElement("br",null),"\u041e\u0442\u043a\u0440\u044b\u0442\u0438\u0435: 05:30",r.a.createElement("br",null),r.a.createElement("br",null),"\u0417\u0430\u043a\u0440\u044b\u0442\u0438\u0435: 00:40",r.a.createElement("br",null),r.a.createElement("br",null),"\u0426\u0435\u043d\u0430 \u0431\u0438\u043b\u0435\u0442\u0430: 45\u20bd")))})),k=(n(128),Object(l.b)(function(e){return{top:e.top}},function(e){var t=e.navigator.goBack,n=e.navigator.goForward,a=e.transactions,r=a.select,o=a.reset,c=e.user;return{go:n,transactionSelect:r,resetTransactions:o,loadUser:c.load,openProfile:c.openProfile,back:t,cloudUpdate:e.cloud.changeParam}})(function(e){var t=e.id,a=e.back;e.top,e.openProfile,e.go;return r.a.createElement(i.Panel,{id:t},r.a.createElement(i.PanelHeader,{left:r.a.createElement(b.a,{onClick:a})},"\u041c\u043e\u0441\u043a\u0432\u0430"),r.a.createElement(i.Group,{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"height: 100vw, weight: 110vw",textAlign:"center"}},r.a.createElement(i.Div,null,r.a.createElement("img",{src:n(128),alt:"",style:{width:"100%",boxShadow:"0 0 25px",borderRadius:35}}))),r.a.createElement("div",null,r.a.createElement(v.Notify,{type:"info"},r.a.createElement("strong",null,"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e"),r.a.createElement("br",null),r.a.createElement("br",null),"\u041e\u0442\u043a\u0440\u044b\u0442\u0438\u0435: 05:30",r.a.createElement("br",null),r.a.createElement("br",null),"\u0417\u0430\u043a\u0440\u044b\u0442\u0438\u0435: 01:00",r.a.createElement("br",null),r.a.createElement("br",null),"\u0426\u0435\u043d\u0430 \u0431\u0438\u043b\u0435\u0442\u0430: 55\u20bd")))})),y=Object(l.b)(function(e){return{activePanel:e.navigator.active,history:e.navigator.history,popout:e.navigator.popout}},function(e){return{goBack:e.navigator.goBack,userLoad:e.user.load}})(function(e){var t=e.activePanel,n=e.history,o=e.goBack,c=e.userLoad,l=e.popout;e.connect;return Object(a.useEffect)(function(){c()},[c]),r.a.createElement(i.ConfigProvider,{isWebView:!0},r.a.createElement(i.View,{activePanel:t,history:n,onSwipeBack:o,popout:l},r.a.createElement(f,{id:"home"}),r.a.createElement(E,{id:"top"}),r.a.createElement(g,{id:"profile"}),r.a.createElement(h,{id:"transaction"}),r.a.createElement(w,{id:"about"}),r.a.createElement(k,{id:"stories"})))}),x=n(163),P=n(23),j=n(164),O=n(39),C={state:{active:"home",history:["home"],popout:null},reducers:{go:function(e,t){return{active:t,history:[].concat(Object(j.a)(e.history),[t]),popout:null}},back:function(e){return{active:e.history[e.history.length-2],history:e.history.slice(0,e.history.length-1),popout:null}},setPopout:function(e,t){return Object(P.a)({},e,{popout:t})}},effects:function(e){return{goForward:function(t,n){"home"===n.navigator.active&&O.a.send("VKWebAppEnableSwipeBack",{}),e.navigator.go(t)},goBack:function(t,n){"home"===n.navigator.history[n.navigator.history.length-2]&&O.a.send("VKWebAppDisableSwipeBack",{}),e.navigator.back()}}}},S="https://terminal.viren.ru/api.php?action=",A=function(e){return fetch(S+"getTransactions&user="+e).then(function(e){return e.json()}).then(function(e){return e.reverse()})},B=function(e){return fetch(S+"getProfile&user="+e).then(function(e){return e.json()})},U=function(e){return fetch(S+"getTransaction&id="+e).then(function(e){return e.json()})},I={state:{vk:{},selected:{}},reducers:{loaded:function(e,t){return Object(P.a)({},e,{vk:t})},update:function(e,t){return Object(P.a)({},e,{vk:Object(P.a)({},e.vk,t)})},select:function(e,t){return Object(P.a)({},e,{selected:t})}},effects:function(e){return{load:function(){var t=Object(d.a)(s.a.mark(function t(){var n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.a.send("VKWebAppGetUserInfo",{});case 2:return n=t.sent,t.next=5,e.user.loaded(n.data);case 5:return t.next=7,e.user.loadProfile(n.data.id);case 7:return t.next=9,e.transactions.load(n.data.id);case 9:e.top.load();case 10:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),loadProfile:function(){var t=Object(d.a)(s.a.mark(function t(n,a){var r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B(n);case 2:r=t.sent,e.user.select(Object(P.a)({},r,{id:n})),a.user.vk.id===n&&e.user.update({carma:r.carma});case 5:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}(),openProfile:function(){var t=Object(d.a)(s.a.mark(function t(n){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.navigator.setPopout(r.a.createElement(i.ScreenSpinner,null));case 2:return t.next=4,e.user.loadProfile(n);case 4:e.navigator.goForward("profile");case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}},T={state:{list:[],selected:0},reducers:{loaded:function(e,t){return Object(P.a)({},e,{list:t})},select:function(e,t){return Object(P.a)({},e,{selected:t})},reset:function(){return{list:[],selected:0}}},effects:function(e){return{load:function(){var t=Object(d.a)(s.a.mark(function t(n){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A(n);case 2:a=t.sent,e.transactions.loaded(a);case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),selectSingleTransaction:function(){var t=Object(d.a)(s.a.mark(function t(n){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U(n);case 2:a=t.sent,e.transactions.select(a);case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}},K={state:[],reducers:{loaded:function(e,t){return t}},effects:function(e){return{load:function(){var t=Object(d.a)(s.a.mark(function t(){var n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(S+"getTop").then(function(e){return e.json()});case 2:n=t.sent,e.top.loaded(n);case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()}}},_=n(68),G=n.n(_),V={navigator:C,user:I,transactions:T,top:K,cloud:{state:{},reducers:{update:function(e,t){return Object(P.a)({},e,t)}},effects:function(e){return{initialize:function(){var t=Object(d.a)(s.a.mark(function t(n){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:G.a.subscribe(function(t){"VKWebAppAccessTokenReceived"===t.detail.type&&(e.cloud.update({access_token:t.detail.data.access_token}),O.a.send("VKWebAppCallAPIMethod",{method:"execute.getParamsList",params:{v:"5.95",access_token:t.detail.data.access_token}}).then(function(t){return e.cloud.loadByKeys(t.data.response)}))}),G.a.send("VKWebAppInit",{}),G.a.send("VKWebAppGetAuthToken",{app_id:6951202,scope:"user"});case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),changeParam:function(){var t=Object(d.a)(s.a.mark(function t(n,a){var r,o;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=n.param,o=n.value,O.a.send("VKWebAppCallAPIMethod",{method:"execute.setParam",params:{param:r,value:o,v:"5.95",access_token:a.cloud.access_token}}).then(function(t){return e.cloud.loadByKeys(t.data.response)});case 2:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}(),loadByKeys:function(){var t=Object(d.a)(s.a.mark(function t(n,a){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:O.a.send("VKWebAppCallAPIMethod",{method:"execute.getParams",params:{keys:n.join(","),v:"5.95",access_token:a.cloud.access_token}}).then(function(t){e.cloud.update(e.cloud.update(t.data.response.reduce(function(e,t){return e[t.key]=t.value,e},{loaded:!0})))}).catch(function(){return e.cloud.update({loaded:!0})});case 1:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()}}}},F=Object(x.init)({models:V});F.dispatch.cloud.initialize(6982755);var R,W=""===(R=window.location.hash.replace("#",""))?null:R.split("&").reduce(function(e,t){var n=t.split("="),a=Object(p.a)(n,2),r=a[0],o=a[1];return e[decodeURIComponent(r)]=decodeURIComponent(o),e},{});W&&W.transactionId&&(F.dispatch.transactions.selectSingleTransaction(W.transactionId),F.dispatch.navigator.goForward("transaction")),c.a.render(r.a.createElement(l.a,{store:F},r.a.createElement(y,null)),document.getElementById("root"))}},[[165,1,2]]]);
//# sourceMappingURL=main.ae393ac5.chunk.js.map