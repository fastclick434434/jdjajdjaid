(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{157:function(e,t,n){e.exports=n(377)},374:function(e,t,n){e.exports=n.p+"static/media/logo.71902e4a.svg"},377:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(63),o=n.n(c),i=n(19),l=n(2),u=n(7),s=n.n(u),p=n(17),d=n(64),f=n(57),m=n.n(f),v=n(79),b=n.n(v),E=n(150),h=n.n(E),g=n(151),k=n.n(g),y=n(152),w=n.n(y),C=n(153),x=n.n(C),j=function(e){var t=document.createElement("a");t.href=e,t.target="_blank",t.dispatchEvent(new window.MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))},P=Object(i.b)(function(e){return{user:e.user.vk,transactions:e.transactions.list,topPlace:e.top.findIndex(function(t){return t.id===e.user.vk.id})+1,cloud:e.cloud}},function(e){var t=e.navigator.goForward,n=e.transactions,a=n.select,r=n.reset,c=e.user;return{go:t,transactionSelect:a,resetTransactions:r,loadUser:c.load,openProfile:c.openProfile,cloudUpdate:e.cloud.changeParam}})(function(e){var t=e.id,n=e.user,c=e.go,o=e.transactions,i=e.cloud,u=e.transactionSelect,f=e.resetTransactions,v=e.loadUser,E=e.topPlace,g=e.openProfile,y=e.cloudUpdate,C=Object(a.useState)(!1),P=Object(d.a)(C,2),O=P[0],_=P[1],A=Object(a.useState)(!1),B=Object(d.a)(A,2),S=B[0],G=B[1],T=function(){var e=Object(p.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),f(),e.next=4,v();case 4:_(!1);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)(function(){G(!!i.loaded&&!i.discussion_tooltip)},[i.discussion_tooltip,i.loaded]),r.a.createElement(l.Panel,{id:t},r.a.createElement(l.PanelHeader,{left:r.a.createElement(l.Tooltip,{text:"\u0427\u0442\u043e\u0431\u044b \u043e\u0442\u043a\u0440\u044b\u0442\u044c \u0431\u0435\u0441\u0435\u0434\u0443, \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043a\u043d\u043e\u043f\u043a\u0443. ",isShown:S,onClose:function(){G(!1),y({param:"discussion_tooltip",value:!0})},offsetX:5,offsetY:5},r.a.createElement(l.HeaderButton,{onClick:function(){return j("")}},r.a.createElement(k.a,null)))},"DevChat"),r.a.createElement(l.PullToRefresh,{onRefresh:T,isFetching:O},n&&r.a.createElement(l.Group,{title:"\u041c\u043e\u0439 \u043f\u0440\u043e\u0444\u0438\u043b\u044c"},r.a.createElement(l.Cell,{expandable:!0,before:n.photo_200?r.a.createElement(l.Avatar,{src:n.photo_200}):null,description:n.carma?"\u0420\u0435\u0439\u0442\u0438\u043d\u0433: "+n.carma:"\u0423\u0440\u043e\u0432\u0435\u043d\u044c: ...",onClick:function(){return g(n.id)}},n.first_name+" "+n.last_name)),r.a.createElement(l.Group,{title:"\u041c\u0435\u043d\u044e"},r.a.createElement(l.List,null,r.a.createElement(l.Cell,{expandable:!0,before:r.a.createElement(w.a,null),indicator:0!==E?r.a.createElement(m.a,{type:"primary"},r.a.createElement("span",{style:{padding:"0 5px"}},"\u0412\u0430\u0448\u0435 \u043c\u0435\u0441\u0442\u043e: ",E)):null,onClick:function(){return c("top")}},"\u0420\u0435\u0439\u0442\u0438\u043d\u0433"),r.a.createElement(l.Cell,{expandable:!0,before:r.a.createElement(x.a,null),onClick:function(){return c("about")}},"\u041e \u0441\u0435\u0440\u0432\u0438\u0441\u0435"))),r.a.createElement(l.Group,{title:"\u0421\u043e\u0431\u044b\u0442\u0438\u044f"},o.length>0?o.map(function(e,t){return"1"===e.subuser?r.a.createElement(l.Cell,{key:t,before:r.a.createElement(l.Avatar,{style:{background:"black"},size:28},r.a.createElement(h.a,{fill:"var(--white)"})),description:"\u0421\u0443\u043c\u043c\u0430: "+e.carma},"\u041f\u043e\u0434\u0430\u0440\u043e\u043a \u043e\u0442 ProDialog"):r.a.createElement(l.Cell,{key:t,expandable:!0,before:r.a.createElement(l.Avatar,{style:{background:e.send?"#528bcc":"+"===e.type?"#4bb34b":"#e64646"},size:28},r.a.createElement("div",{style:{transform:e.send?"rotate(45deg)":"rotate(225deg)"}},r.a.createElement(b.a,{fill:"var(--white)"}))),description:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439: "+e.reason,onClick:function(){u(e),c("transaction")}},"\u0420\u0435\u0439\u0442\u0438\u043d\u0433 ",e.send?"\u0434\u043b\u044f":"\u043e\u0442"," ",e.first_name)}):r.a.createElement(l.Spinner,{size:"medium",style:{marginTop:20,paddingBottom:20}}))))}),O=n(40),_=n.n(O),A=Object(i.b)(function(e){return{me:e.user.vk.id===e.user.selected.id,user:e.user.selected}},function(e){return{back:e.navigator.goBack}})(function(e){var t=e.id,n=e.back,a=e.user,c=e.me;return r.a.createElement(l.Panel,{id:t},r.a.createElement(l.PanelHeader,{left:r.a.createElement(_.a,{onClick:n})},"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"),r.a.createElement(l.Group,null,r.a.createElement(l.Cell,{description:"",asideContent:c?null:r.a.createElement(l.Button,{onClick:function(){return j("https://vk.com/id"+a.id)}},"\u041f\u0440\u043e\u0444\u0438\u043b\u044c \u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435"),size:"l"},"vk.me/id",a.id)),r.a.createElement(l.Group,{title:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"},r.a.createElement(l.List,null,r.a.createElement(l.Cell,null,r.a.createElement(l.InfoRow,{title:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433"},a.carma)),r.a.createElement(l.Cell,null,r.a.createElement(l.InfoRow,{title:"\u041f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u044f"},a.warn?"\u0418\u043c\u0435\u044e\u0442\u0441\u044f":"\u041d\u0435 \u0438\u043c\u0435\u044f\u0442\u0441\u044f")))),298845865===a.id?r.a.createElement(l.Group,{title:"..."},r.a.createElement(l.List,null,r.a.createElement(l.Cell,{expandable:!0,before:r.a.createElement(l.Avatar,{src:"https://pp.userapi.com/c845220/v845220051/207fcc/wSTraZ1_xP0.jpg"}),description:"\u041d\u0430\u0448 \u0433\u0435\u0440\u043e\u0439!",onClick:function(){return j("")},size:"l"},"@hit2hat"),r.a.createElement(l.Cell,{indicator:r.a.createElement(m.a,{type:"primary"},"100\u041a")},"\u041f\u043e\u0434\u043f\u0438\u0441\u0447\u0438\u043a\u0438"),r.a.createElement(l.Cell,{indicator:r.a.createElement(m.a,{type:"primary"},"1\u041a")},"\u041f\u043e\u0434\u043f\u0438\u0441\u043a\u0438"),r.a.createElement(l.Cell,{indicator:r.a.createElement(m.a,{type:"primary"})},"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d"))):null,r.a.createElement(l.Group,{title:"\u041f\u0440\u0430\u0432\u0430 \u043c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440\u0430"},a.role?r.a.createElement(l.List,null,a.role.map(function(e){return r.a.createElement(l.Cell,null,e)})):r.a.createElement("div",{style:{marginLeft:12,paddingBottom:15}},"\u041d\u0435\u0442")))}),B=n(28),S=Object(i.b)(function(e){return{transaction:e.transactions.selected}},function(e){return{back:e.navigator.goBack}})(function(e){var t=e.id,n=e.back,a=e.transaction,c=new Date;return c.setTime(1e3*(a.time||0)),r.a.createElement(l.Panel,{id:t},r.a.createElement(l.PanelHeader,{left:r.a.createElement(_.a,{onClick:n})},"\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u0438"),r.a.createElement(l.Group,null,r.a.createElement("div",{style:{display:"flex",alignItems:"center",flexDirection:"column",padding:25}},r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(l.Avatar,{src:a.avatar,size:120})),r.a.createElement("h3",{style:{marginBottom:0}},"\u0420\u0435\u0439\u0442\u0438\u043d\u0433 ",a.send?"\u0434\u043b\u044f":"\u043e\u0442"," ",a.first_name)),r.a.createElement(l.CellButton,{align:"center",style:{borderTop:"5px solid var(--background_page)"},onClick:function(){return B.a.send("VKWebAppShare",{link:"https://vk.com/a#transactionId="+a.id})}},"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f")),r.a.createElement(l.Group,{title:"\u0412\u0440\u0435\u043c\u044f"},r.a.createElement("div",{style:{marginLeft:12,paddingBottom:15}},c.toUTCString())),r.a.createElement(l.Group,{title:"\u0421\u0443\u043c\u043c\u0430"},r.a.createElement("div",{style:{marginLeft:12,paddingBottom:15}},r.a.createElement("span",{style:{color:"+"===a.type?"#4bb34b":"#e64646"}},a.carma))),r.a.createElement(l.Group,{title:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"},r.a.createElement("div",{style:{marginLeft:12,paddingBottom:15}},a.reason)))}),G=Object(i.b)(function(e){return{top:e.top}},function(e){return{back:e.navigator.goBack,openProfile:e.user.openProfile}})(function(e){var t=e.id,n=e.back,a=e.top,c=e.openProfile;return r.a.createElement(l.Panel,{id:t},r.a.createElement(l.PanelHeader,{left:r.a.createElement(_.a,{onClick:n})},"\u0420\u0435\u0439\u0442\u0438\u043d\u0433"),r.a.createElement(l.Group,null,r.a.createElement(l.List,null,a.map(function(e){return r.a.createElement(l.Cell,{before:r.a.createElement(l.Avatar,{src:e.avatar}),description:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433: "+e.carma,onClick:function(){return c(e.id)}},e.first_name+" "+e.last_name)}))))}),T=n(154),I=n.n(T),L=(n(372),n(373),Object(i.b)(function(){return{}},function(e){return{back:e.navigator.goBack}})(function(e){var t=e.id,a=e.back;return r.a.createElement(l.Panel,{id:t},r.a.createElement(l.PanelHeader,{left:r.a.createElement(_.a,{onClick:a})},"\u0421\u0435\u0440\u0432\u0438\u0441"),r.a.createElement(l.Group,{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"25px 100px",textAlign:"center"}},r.a.createElement(l.Div,null,r.a.createElement("img",{src:n(374),alt:"",style:{width:"100%",boxShadow:"0 0 25px #C165DD",borderRadius:35,background:"#C165DD"}}),r.a.createElement("h3",{style:{margin:0,padding:0,paddingTop:25}},"DevChat"),r.a.createElement("h4",{style:{margin:0,padding:0,paddingTop:5,color:"rgba(0, 0, 0, .5)"}},"\u0412\u0435\u0440\u0441\u0438\u044f: 1.0 (Beta)}"))),r.a.createElement(l.Group,null,r.a.createElement(l.Div,null,"\u041e\u0442\u043b\u0438\u0447\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435, \u0433\u0434\u0435 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0438 \u043e\u0431\u0449\u0430\u044e\u0442\u0441\u044f \u043c\u0435\u0436\u0434\u0443 \u0441\u043e\u0431\u043e\u0439!")),r.a.createElement(l.Group,{title:"\u041c\u043e\u0438 \u0441\u043e\u0437\u0434\u0430\u0442\u0435\u043b\u0438:"},r.a.createElement(l.List,null,r.a.createElement(l.Cell,{onClick:function(){return j("https://vk.com/pukhn_seo")},description:"\u0420\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a",before:r.a.createElement(l.Avatar,{src:"https://pp.userapi.com/c845220/v845220051/207fcc/wSTraZ1_xP0.jpg"})},"\u041d\u0438\u043a\u0438\u0442\u0430 \u0421\u0430\u044f\u043f\u0438\u043d"),r.a.createElement(l.Cell,{onClick:function(){return j("https://vk.com/funikita")},description:"\u041d\u0443\u0443, \u0442\u043e\u0436\u0435 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a?",before:r.a.createElement(l.Avatar,{src:"https://pp.userapi.com/c845124/v845124708/20cc32/LsS0gcS9GZ4.jpg"})},"\u041d\u0438\u043a\u0438\u0442\u0430 \u041c\u0430\u0439\u043e\u0440\u043e\u0432"))),r.a.createElement(l.Group,{title:"\u0421\u0441\u044b\u043b\u043a\u0438"},r.a.createElement(l.List,null,r.a.createElement(l.Cell,{expandable:!0,onClick:function(){return j("https://vk.com/pukhn_seo")},before:r.a.createElement(I.a,{fill:"#4bb34b"})},r.a.createElement("span",{style:{color:"#4bb34b"}},"\u0420\u0430\u0441\u0441\u043a\u0430\u0437\u0430\u0442\u044c \u043e\u0431 \u043e\u0448\u0438\u0431\u043a\u0435")))))})),K=Object(i.b)(function(e){return{activePanel:e.navigator.active,history:e.navigator.history,popout:e.navigator.popout}},function(e){return{goBack:e.navigator.goBack,userLoad:e.user.load}})(function(e){var t=e.activePanel,n=e.history,c=e.goBack,o=e.userLoad,i=e.popout;return Object(a.useEffect)(function(){o()},[o]),r.a.createElement(l.ConfigProvider,{isWebView:!0},r.a.createElement(l.View,{activePanel:t,history:n,onSwipeBack:c,popout:i},r.a.createElement(P,{id:"home"}),r.a.createElement(G,{id:"top"}),r.a.createElement(A,{id:"profile"}),r.a.createElement(S,{id:"transaction"}),r.a.createElement(L,{id:"about"})))}),D=n(155),V=n(23),W=n(156),z={state:{active:"home",history:["home"],popout:null},reducers:{go:function(e,t){return{active:t,history:[].concat(Object(W.a)(e.history),[t]),popout:null}},back:function(e){return{active:e.history[e.history.length-2],history:e.history.slice(0,e.history.length-1),popout:null}},setPopout:function(e,t){return Object(V.a)({},e,{popout:t})}},effects:function(e){return{goForward:function(t,n){"home"===n.navigator.active&&B.a.send("VKWebAppEnableSwipeBack",{}),e.navigator.go(t)},goBack:function(t,n){"home"===n.navigator.history[n.navigator.history.length-2]&&B.a.send("VKWebAppDisableSwipeBack",{}),e.navigator.back()}}}},R="https://terminal.viren.ru/api.php?action=",U=function(e){return fetch(R+"getTransactions&user="+e).then(function(e){return e.json()}).then(function(e){return e.reverse()})},H=function(e){return fetch(R+"getProfile&user="+e).then(function(e){return e.json()})},F=function(e){return fetch(R+"getTransaction&id="+e).then(function(e){return e.json()})},M={state:{vk:{},selected:{}},reducers:{loaded:function(e,t){return Object(V.a)({},e,{vk:t})},update:function(e,t){return Object(V.a)({},e,{vk:Object(V.a)({},e.vk,t)})},select:function(e,t){return Object(V.a)({},e,{selected:t})}},effects:function(e){return{load:function(){var t=Object(p.a)(s.a.mark(function t(){var n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B.a.send("VKWebAppGetUserInfo",{});case 2:return n=t.sent,t.next=5,e.user.loaded(n.data);case 5:return t.next=7,e.user.loadProfile(n.data.id);case 7:return t.next=9,e.transactions.load(n.data.id);case 9:e.top.load();case 10:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),loadProfile:function(){var t=Object(p.a)(s.a.mark(function t(n,a){var r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,H(n);case 2:r=t.sent,e.user.select(Object(V.a)({},r,{id:n})),a.user.vk.id===n&&e.user.update({carma:r.carma});case 5:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}(),openProfile:function(){var t=Object(p.a)(s.a.mark(function t(n){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.navigator.setPopout(r.a.createElement(l.ScreenSpinner,null));case 2:return t.next=4,e.user.loadProfile(n);case 4:e.navigator.goForward("profile");case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}},Z={state:{list:[],selected:0},reducers:{loaded:function(e,t){return Object(V.a)({},e,{list:t})},select:function(e,t){return Object(V.a)({},e,{selected:t})},reset:function(){return{list:[],selected:0}}},effects:function(e){return{load:function(){var t=Object(p.a)(s.a.mark(function t(n){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U(n);case 2:a=t.sent,e.transactions.loaded(a);case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),selectSingleTransaction:function(){var t=Object(p.a)(s.a.mark(function t(n){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F(n);case 2:a=t.sent,e.transactions.select(a);case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}},J={state:[],reducers:{loaded:function(e,t){return t}},effects:function(e){return{load:function(){var t=Object(p.a)(s.a.mark(function t(){var n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(R+"getTop").then(function(e){return e.json()});case 2:n=t.sent,e.top.loaded(n);case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()}}},X=n(80),Y=n.n(X),q={navigator:z,user:M,transactions:Z,top:J,cloud:{state:{},reducers:{update:function(e,t){return Object(V.a)({},e,t)}},effects:function(e){return{initialize:function(){var t=Object(p.a)(s.a.mark(function t(n){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Y.a.subscribe(function(t){"VKWebAppAccessTokenReceived"===t.detail.type&&(e.cloud.update({access_token:t.detail.data.access_token}),B.a.send("VKWebAppCallAPIMethod",{method:"execute.getParamsList",params:{v:"5.95",access_token:t.detail.data.access_token}}).then(function(t){return e.cloud.loadByKeys(t.data.response)}))}),Y.a.send("VKWebAppInit",{}),Y.a.send("VKWebAppGetAuthToken",{app_id:n,scope:"user"});case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),changeParam:function(){var t=Object(p.a)(s.a.mark(function t(n,a){var r,c;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=n.param,c=n.value,B.a.send("VKWebAppCallAPIMethod",{method:"execute.setParam",params:{param:r,value:c,v:"5.95",access_token:a.cloud.access_token}}).then(function(t){return e.cloud.loadByKeys(t.data.response)});case 2:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}(),loadByKeys:function(){var t=Object(p.a)(s.a.mark(function t(n,a){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:B.a.send("VKWebAppCallAPIMethod",{method:"execute.getParams",params:{keys:n.join(","),v:"5.95",access_token:a.cloud.access_token}}).then(function(t){e.cloud.update(e.cloud.update(t.data.response.reduce(function(e,t){return e[t.key]=t.value,e},{loaded:!0})))}).catch(function(){return e.cloud.update({loaded:!0})});case 1:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()}}}},N=Object(D.init)({models:q});n(376);N.dispatch.cloud.initialize(6982755);var Q,$=""===(Q=window.location.hash.replace("#",""))?null:Q.split("&").reduce(function(e,t){var n=t.split("="),a=Object(d.a)(n,2),r=a[0],c=a[1];return e[decodeURIComponent(r)]=decodeURIComponent(c),e},{});$&&$.transactionId&&(N.dispatch.transactions.selectSingleTransaction($.transactionId),N.dispatch.navigator.goForward("transaction")),o.a.render(r.a.createElement(i.a,{store:N},r.a.createElement(K,null)),document.getElementById("root"))}},[[157,1,2]]]);
//# sourceMappingURL=main.6dfa82fa.chunk.js.map